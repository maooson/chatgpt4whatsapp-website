---
import { Tick } from "@components/ui/icons";
import Link from "@components/ui/link.astro";

const { plan } = Astro.props;
const buttonLink = plan.button.link || "#";
const ctaLink =
  buttonLink === "#"
    ? "#"
    : buttonLink.includes("?")
      ? `${buttonLink}&utm_source=site&utm_medium=pricing&utm_campaign=${plan.name.toLowerCase()}`
      : `${buttonLink}?utm_source=site&utm_medium=pricing&utm_campaign=${plan.name.toLowerCase()}`;
---

<div>
  <div
    class={`flex flex-col w-full order-first lg:order-none py-5 px-6 rounded-lg ${
      plan.name === "Pro" ? "bg-pink-100" : "bg-gray-100"
    } ${plan.name === "Pro" ? "transform -translate-y-5" : ""}`}>
    <div class="text-center">
      <h4 class="text-lg text-gray-400">{plan.name}</h4>
      <p
        class={`mt-4 text-4xl font-medium md:text-xl ${
          plan.name === "Pro" ? "text-pink-500" : "text-gray-600"
        }`}>
        {
          plan.price && typeof plan.price === "object"
            ? plan.price.monthly
            : plan.price
        }
      </p>

      {
        plan.name === "Pro" || plan.name === "Pro" ? (
          <p class="text-gray-500 text-sm pt-2">Per user/month</p>
        ) : null
      }
    </div>
    <ul class="grid mt-8 text-left gap-y-4">
      {
        plan.features.map((item) => (
          <li class="flex gap-2 text-gray-900">
            <Tick class="w-6 h-6" />
            <span>{item}</span>
          </li>
        ))
      }
    </ul>
    <div class="flex mt-8 justify-center mb-4">
      <Link
        href={ctaLink || "#"}
        data-cta={`pricing_${plan.name.toLowerCase()}_click`}
        data-location="pricing"
        rel="noopener"
        target="_blank"
        class={`py-2 px-4 rounded-lg focus:outline-none ${
          plan.name === "Pro"
            ? "bg-pink-500 text-white hover:bg-pink-500"
            : "bg-gray-300 text-gray-600 hover:bg-gray-200"
        }`}>
        {plan.button.text || "Start Free Trial"}
      </Link>
    </div>
  </div>
</div>
